"""
WARNING: AUTOGENERATED CODE

    This code was generated by a tool.
    Autogenerated on: 2022-06-27 13:25:13
    
    Manual changes to this file may cause unexpected behavior in your application.
    Manual changes to this file will be overwritten if the code is regenerated.
"""

from pyopencga.rest_clients._parent_rest_clients import _ParentRestClient


class Execution(_ParentRestClient):
    """
    This class contains methods for the 'Executions' webservices
    Client version: 2.4.0-SNAPSHOT [08711223b85f9226bf51c171c2f52e1872006b1a]
    PATH: /{apiVersion}/executions
    """

    def __init__(self, configuration, token=None, login_handler=None, *args, **kwargs):
        super(Execution, self).__init__(configuration, token, login_handler, *args, **kwargs)

    def update_acl(self, members, action, data=None, **options):
        """
        Update the set of permissions granted for the member.
        PATH: /{apiVersion}/executions/acl/{members}/update

        :param dict data: JSON containing the parameters to add ACLs.
            (REQUIRED)
        :param str action: Action to be performed [ADD, SET, REMOVE or RESET].
            (REQUIRED)
        :param str members: Comma separated list of user or group ids.
            (REQUIRED)
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        """

        options['action'] = action
        return self._post(category='executions', resource='update', subcategory='acl', second_query_id=members, data=data, **options)

    def create(self, data=None, **options):
        """
        Register a past execution.
        PATH: /{apiVersion}/executions/create

        :param dict data: execution. (REQUIRED)
        :param str include: Fields included in the response, whole JSON path
            must be provided.
        :param str exclude: Fields excluded in the response, whole JSON path
            must be provided.
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param bool include_result: Flag indicating to include the created or
            updated document result in the response.
        """

        return self._post(category='executions', resource='create', data=data, **options)

    def distinct(self, field, **options):
        """
        Execution distinct method.
        PATH: /{apiVersion}/executions/distinct

        :param str field: Field for which to obtain the distinct values.
            (REQUIRED)
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param bool other_studies: Flag indicating the entries being queried
            can belong to any related study, not just the primary one.
        :param str id: Comma separated list of execution IDs up to a maximum
            of 100.
        :param str uuid: Comma separated list of execution UUIDs up to a
            maximum of 100.
        :param str internal_tool_id: Tool ID executed by the execution.
        :param str user_id: User that created the execution.
        :param str priority: Priority of the execution.
        :param str internal_status: Filter by internal status.
        :param str creation_date: Creation date. Format: yyyyMMddHHmmss.
            Examples: >2018, 2017-2018, <201805.
        :param str modification_date: Modification date. Format:
            yyyyMMddHHmmss. Examples: >2018, 2017-2018, <201805.
        :param bool visited: Visited status of execution.
        :param bool is_pipeline: Filter by pipeline/not pipeline executions.
        :param str tags: Execution tags.
        :param str acl: Filter entries for which a user has the provided
            permissions. Format: acl={user}:{permissions}. Example:
            acl=john:WRITE,WRITE_ANNOTATIONS will return all entries for which
            user john has both WRITE and WRITE_ANNOTATIONS permissions. Only
            study owners or administrators can query by this field. .
        :param str release: Release when it was created.
        :param bool deleted: Boolean to retrieve deleted entries.
        """

        options['field'] = field
        return self._get(category='executions', resource='distinct', **options)

    def aggregation_stats_jobs(self, **options):
        """
        Fetch catalog job stats.
        PATH: /{apiVersion}/executions/jobs/aggregationStats

        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param str tool_id: Tool id.
        :param str tool_scope: Tool scope.
        :param str tool_type: Tool type.
        :param str tool_resource: Tool resource.
        :param str user_id: User id.
        :param str priority: Priority.
        :param str tags: Tags.
        :param str executor_id: Executor id.
        :param str executor_framework: Executor framework.
        :param str creation_year: Creation year.
        :param str creation_month: Creation month (JANUARY, FEBRUARY...).
        :param str creation_day: Creation day.
        :param str creation_day_of_week: Creation day of week (MONDAY,
            TUESDAY...).
        :param str status: Status.
        :param str release: Release.
        :param bool default: Calculate default stats.
        :param str field: List of fields separated by semicolons, e.g.:
            studies;type. For nested fields use >>, e.g.:
            studies>>biotype;type;numSamples[0..10]:1.
        """

        return self._get(category='executions', resource='aggregationStats', subcategory='jobs', **options)

    def distinct_jobs(self, field, **options):
        """
        Job distinct method.
        PATH: /{apiVersion}/executions/jobs/distinct

        :param str field: Field for which to obtain the distinct values.
            (REQUIRED)
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param bool other_studies: Flag indicating the entries being queried
            can belong to any related study, not just the primary one.
        :param str id: Comma separated list of job IDs up to a maximum of 100.
        :param str uuid: Comma separated list of job UUIDs up to a maximum of
            100.
        :param str tool_id: Tool ID executed by the job.
        :param str tool_type: Tool type executed by the job [OPERATION,
            ANALYSIS].
        :param str user_id: User that created the job.
        :param str priority: Priority of the job.
        :param str status: Filter by status.
        :param str internal_status: Filter by internal status.
        :param str creation_date: Creation date. Format: yyyyMMddHHmmss.
            Examples: >2018, 2017-2018, <201805.
        :param str modification_date: Modification date. Format:
            yyyyMMddHHmmss. Examples: >2018, 2017-2018, <201805.
        :param bool visited: Visited status of job.
        :param str tags: Execution tags.
        :param str input: Comma separated list of file IDs used as input.
        :param str output: Comma separated list of file IDs used as output.
        :param str acl: Filter entries for which a user has the provided
            permissions. Format: acl={user}:{permissions}. Example:
            acl=john:WRITE,WRITE_ANNOTATIONS will return all entries for which
            user john has both WRITE and WRITE_ANNOTATIONS permissions. Only
            study owners or administrators can query by this field. .
        :param str release: Release when it was created.
        :param bool deleted: Boolean to retrieve deleted entries.
        """

        options['field'] = field
        return self._get(category='executions', resource='distinct', subcategory='jobs', **options)

    def search_jobs(self, **options):
        """
        Job search method.
        PATH: /{apiVersion}/executions/jobs/search

        :param str include: Fields included in the response, whole JSON path
            must be provided.
        :param str exclude: Fields excluded in the response, whole JSON path
            must be provided.
        :param int limit: Number of results to be returned.
        :param int skip: Number of results to skip.
        :param bool count: Get the total number of results matching the query.
            Deactivated by default.
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param bool other_studies: Flag indicating the entries being queried
            can belong to any related study, not just the primary one.
        :param str id: Comma separated list of job IDs up to a maximum of 100.
        :param str uuid: Comma separated list of job UUIDs up to a maximum of
            100.
        :param str tool_id: Tool ID executed by the job.
        :param str tool_type: Tool type executed by the job [OPERATION,
            ANALYSIS].
        :param str user_id: User that created the job.
        :param str priority: Priority of the job.
        :param str status: Filter by status.
        :param str internal_status: Filter by internal status.
        :param str creation_date: Creation date. Format: yyyyMMddHHmmss.
            Examples: >2018, 2017-2018, <201805.
        :param str modification_date: Modification date. Format:
            yyyyMMddHHmmss. Examples: >2018, 2017-2018, <201805.
        :param bool visited: Visited status of job.
        :param str tags: Execution tags.
        :param str input: Comma separated list of file IDs used as input.
        :param str output: Comma separated list of file IDs used as output.
        :param str acl: Filter entries for which a user has the provided
            permissions. Format: acl={user}:{permissions}. Example:
            acl=john:WRITE,WRITE_ANNOTATIONS will return all entries for which
            user john has both WRITE and WRITE_ANNOTATIONS permissions. Only
            study owners or administrators can query by this field. .
        :param str release: Release when it was created.
        :param bool deleted: Boolean to retrieve deleted entries.
        """

        return self._get(category='executions', resource='search', subcategory='jobs', **options)

    def info_jobs(self, jobs, **options):
        """
        Get job information.
        PATH: /{apiVersion}/executions/jobs/{jobs}/info

        :param str jobs: Comma separated list of job IDs or UUIDs up to a
            maximum of 100. (REQUIRED)
        :param str include: Fields included in the response, whole JSON path
            must be provided.
        :param str exclude: Fields excluded in the response, whole JSON path
            must be provided.
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param bool deleted: Boolean to retrieve deleted jobs.
        """

        return self._get(category='executions', resource='info', subcategory='jobs', second_query_id=jobs, **options)

    def update_jobs(self, jobs, data=None, **options):
        """
        Update some job attributes.
        PATH: /{apiVersion}/executions/jobs/{jobs}/update

        :param str jobs: Comma separated list of job IDs or UUIDs up to a
            maximum of 100. (REQUIRED)
        :param str include: Fields included in the response, whole JSON path
            must be provided.
        :param str exclude: Fields excluded in the response, whole JSON path
            must be provided.
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param bool include_result: Flag indicating to include the created or
            updated document result in the response.
        :param dict data: body.
        """

        return self._post(category='executions', resource='update', subcategory='jobs', second_query_id=jobs, data=data, **options)

    def head_executions_jobs_log(self, job, **options):
        """
        Show the first lines of a log file (up to a limit).
        PATH: /{apiVersion}/executions/jobs/{job}/log/head

        :param str job: Job ID or UUID. (REQUIRED)
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param int offset: Starting byte from which the file will be read.
        :param int lines: Maximum number of lines to be returned up to a
            maximum of 1000.
        :param str type: Log file to be shown (stdout or stderr).
        """

        return self._get(category='executions/jobs', resource='head', query_id=job, subcategory='log', **options)

    def tail_executions_jobs_log(self, job, **options):
        """
        Show the last lines of a log file (up to a limit).
        PATH: /{apiVersion}/executions/jobs/{job}/log/tail

        :param str job: Job ID or UUID. (REQUIRED)
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param int lines: Maximum number of lines to be returned up to a
            maximum of 1000.
        :param str type: Log file to be shown (stdout or stderr).
        """

        return self._get(category='executions/jobs', resource='tail', query_id=job, subcategory='log', **options)

    def run_pipeline(self, pipeline_id, data=None, **options):
        """
        Execute a pipeline.
        PATH: /{apiVersion}/executions/pipeline/{pipelineId}/run

        :param dict data: Execution params. (REQUIRED)
        :param str study: study.
        :param str pipeline_id: Pipeline id.
        :param str job_id: Execution ID. It must be a unique string within the
            study. An ID will be autogenerated automatically if not provided.
        :param str execution_depends_on: Comma separated list of existing
            execution IDs the execution will depend on.
        :param str execution_description: Execution description.
        :param str execution_tags: Execution tags.
        """

        return self._post(category='executions', resource='run', subcategory='pipeline', second_query_id=pipeline_id, data=data, **options)

    def retry(self, data=None, **options):
        """
        Relaunch a failed execution.
        PATH: /{apiVersion}/executions/retry

        :param dict data: job. (REQUIRED)
        :param str execution_id: Execution ID. It must be a unique string
            within the study. An ID will be autogenerated automatically if not
            provided.
        :param str execution_description: Execution description.
        :param str execution_depends_on: Comma separated list of existing
            execution IDs the execution will depend on.
        :param str execution_tags: Execution tags.
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        """

        return self._post(category='executions', resource='retry', data=data, **options)

    def search(self, **options):
        """
        Execution search method.
        PATH: /{apiVersion}/executions/search

        :param str include: Fields included in the response, whole JSON path
            must be provided.
        :param str exclude: Fields excluded in the response, whole JSON path
            must be provided.
        :param int limit: Number of results to be returned.
        :param int skip: Number of results to skip.
        :param bool count: Get the total number of results matching the query.
            Deactivated by default.
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param bool other_studies: Flag indicating the entries being queried
            can belong to any related study, not just the primary one.
        :param str id: Comma separated list of execution IDs up to a maximum
            of 100.
        :param str uuid: Comma separated list of execution UUIDs up to a
            maximum of 100.
        :param str internal_tool_id: Tool ID executed by the execution.
        :param str user_id: User that created the execution.
        :param str priority: Priority of the execution.
        :param str internal_status: Filter by internal status.
        :param str creation_date: Creation date. Format: yyyyMMddHHmmss.
            Examples: >2018, 2017-2018, <201805.
        :param str modification_date: Modification date. Format:
            yyyyMMddHHmmss. Examples: >2018, 2017-2018, <201805.
        :param bool visited: Visited status of execution.
        :param bool is_pipeline: Filter by pipeline/not pipeline executions.
        :param str tags: Execution tags.
        :param str acl: Filter entries for which a user has the provided
            permissions. Format: acl={user}:{permissions}. Example:
            acl=john:WRITE,WRITE_ANNOTATIONS will return all entries for which
            user john has both WRITE and WRITE_ANNOTATIONS permissions. Only
            study owners or administrators can query by this field. .
        :param str release: Release when it was created.
        :param bool deleted: Boolean to retrieve deleted entries.
        """

        return self._get(category='executions', resource='search', **options)

    def top(self, **options):
        """
        Provide a summary of the running executions.
        PATH: /{apiVersion}/executions/top

        :param int limit: Maximum number of executions to be returned.
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param str internal_status: Filter by internal status.
        :param str priority: Priority of the execution.
        :param str user_id: User that created the execution.
        :param str internal_tool_id: Tool ID executed by the execution.
        """

        return self._get(category='executions', resource='top', **options)

    def acl(self, executions, **options):
        """
        Return the acl of the execution. If member is provided, it will only
            return the acl for the member.
        PATH: /{apiVersion}/executions/{executions}/acl

        :param str executions: Comma separated list of execution IDs or UUIDs
            up to a maximum of 100. (REQUIRED)
        :param str member: User or group id.
        :param bool silent: Boolean to retrieve all possible entries that are
            queried for, false to raise an exception whenever one of the
            entries looked for cannot be shown for whichever reason.
        """

        return self._get(category='executions', resource='acl', query_id=executions, **options)

    def delete(self, executions, **options):
        """
        Delete existing executions.
        PATH: /{apiVersion}/executions/{executions}/delete

        :param str executions: Comma separated list of execution ids.
            (REQUIRED)
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        """

        return self._delete(category='executions', resource='delete', query_id=executions, **options)

    def info(self, executions, **options):
        """
        Get execution information.
        PATH: /{apiVersion}/executions/{executions}/info

        :param str executions: Comma separated list of execution IDs or UUIDs
            up to a maximum of 100. (REQUIRED)
        :param str include: Fields included in the response, whole JSON path
            must be provided.
        :param str exclude: Fields excluded in the response, whole JSON path
            must be provided.
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param bool deleted: Boolean to retrieve deleted executions.
        """

        return self._get(category='executions', resource='info', query_id=executions, **options)

    def update(self, executions, data=None, **options):
        """
        Update some execution attributes.
        PATH: /{apiVersion}/executions/{executions}/update

        :param str executions: Comma separated list of execution IDs or UUIDs
            up to a maximum of 100. (REQUIRED)
        :param str include: Fields included in the response, whole JSON path
            must be provided.
        :param str exclude: Fields excluded in the response, whole JSON path
            must be provided.
        :param str study: Study [[user@]project:]study where study and project
            can be either the ID or UUID.
        :param bool include_result: Flag indicating to include the created or
            updated document result in the response.
        :param dict data: body.
        """

        return self._post(category='executions', resource='update', query_id=executions, data=data, **options)

