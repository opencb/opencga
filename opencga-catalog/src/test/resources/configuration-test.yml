---
logLevel: "INFO"
logDir: null

databasePrefix: "opencga_test"
workspace: "/tmp/opencga/sessions"

jobDir: "/tmp/opencga/JOBS"
maxLoginAttempts: 5

audit:
  manager: ""             # Java manager of the audit implementation to be used to audit. If empty, catalog database will be used.
  maxDocuments: 20000000  # Maximum number of documents that will be created in the audit collection.
  maxSize: 100            # Maximum size that the audit collection will have in Gigabytes (GB).

analysis:
  packages: # List of packages where to find analysis tools
    - "org.opencb.opencga"
  scratchDir: "/tmp/"    # Scratch folder for the analysis.
  resource:
    # Base URL from fetching/downloading analysis resources.
    baseUrl: "http://resources.opencb.org/opencb/opencga/analysis/resources/"
    # Base path where to download the analysis resources.
    basePath: "${OPENCGA.INSTALLATION.DIR}/analysis/resources"
    # List of resources to fetch during initialization; the willcard '*' can be used, e.g.: to fetch all resources, use '*';
    # to fetch only Exomiser resources, use 'EXOMISER_*'
    fetchOnInit: []
    # List of resources
    files:
      # Exomiser resources
      - id: "EXOMISER_13_1_0_HG38"
        url: "exomiser/13.1.0/2109_hg38.zip"
        md5: "6d4011146705ca7a28eba9df0bfdacd2"
        path: "exomiser/13.1.0/2109_hg38"
      - id: "EXOMISER_13_1_0_PHENOTYPE"
        url: "exomiser/13.1.0/2109_phenotype.zip"
        md5: "197d126e1b441674f5d5979ac2027591"
        path: "exomiser/13.1.0/2109_phenotype"
      - id: "EXOMISER_14_0_0_HG38"
        url: "exomiser/14.0.0/2402_hg38.zip"
        md5: "7f89dcf9221c7aa5d5471a2ffdb58303"
        path: "exomiser/14.0.0/2402_hg38"
      - id: "EXOMISER_14_0_0_PHENOTYPE"
        url: "exomiser/14.0.0/2402_phenotype.zip"
        md5: "3e7092c852c5f23373ccd465bf2fcd85"
        path: "exomiser/14.0.0/2402_phenotype"

      # Reference genomes
      - id: "REFERENCE_GENOME_GRCH38_FA"
        url: "reference-genomes/grch38/Homo_sapiens.GRCh38.dna.primary_assembly.fa.gz"
        md5: "9732aa3c64469b25b73930db9c96a89f"
        path: "reference-genomes/grch38/Homo_sapiens.GRCh38.dna.primary_assembly.fa.gz"
      - id: "REFERENCE_GENOME_GRCH38_FAI"
        url: "reference-genomes/grch38/Homo_sapiens.GRCh38.dna.primary_assembly.fa.gz.fai"
        md5: "d527f3eb6b664020cf4d882b5820056f"
        path: "reference-genomes/grch38/Homo_sapiens.GRCh38.dna.primary_assembly.fa.gz.fai"
      - id: "REFERENCE_GENOME_GRCH38_GZI"
        url: "reference-genomes/grch38/Homo_sapiens.GRCh38.dna.primary_assembly.fa.gz.gzi"
        md5: "e904772fc5dfa2d69690aafda36332a4"
        path: "reference-genomes/grch38/Homo_sapiens.GRCh38.dna.primary_assembly.fa.gz.gzi"
      - id: "REFERENCE_GENOME_GRCH38_CHAIN"
        url: "reference-genomes/grch38/GRCh37_to_GRCh38.chain.gz"
        md5: "2a862e70fa1afc08f1f3e7a8cc5cda14"
        path: "reference-genomes/grch38/GRCh37_to_GRCh38.chain.gz"
      - id: "REFERENCE_GENOME_GRCH37_FA"
        url: "reference-genomes/grch37/Homo_sapiens.GRCh37.dna.primary_assembly.fa.gz"
        md5: "39a3fff4234a1268c937ec012b3cabb4"
        path: "reference-genomes/grch37/Homo_sapiens.GRCh37.dna.primary_assembly.fa.gz"
      - id: "REFERENCE_GENOME_GRCH37_FAI"
        url: "reference-genomes/grch37/Homo_sapiens.GRCh37.dna.primary_assembly.fa.gz.fai"
        md5: "15d081d2bdfe37d0fff6b753a4dcfef0"
        path: "reference-genomes/grch37/Homo_sapiens.GRCh37.dna.primary_assembly.fa.gz.fai"
      - id: "REFERENCE_GENOME_GRCH37_GZI"
        url: "reference-genomes/grch37/Homo_sapiens.GRCh37.dna.primary_assembly.fa.gz.gzi"
        md5: "bed234b55a30d624159e8577def7005c"
        path: "reference-genomes/grch37/Homo_sapiens.GRCh37.dna.primary_assembly.fa.gz.gzi"
      - id: "REFERENCE_GENOME_HG38_FA"
        url: "reference-genomes/hg38/hg38.fa.gz"
        md5: "56d2da608721db4d805279301ddc902d"
        path: "reference-genomes/hg38/hg38.fa.gz"
      - id: "REFERENCE_GENOME_HG38_CHAIN"
        url: "reference-genomes/hg38/hg19ToHg38.over.chain.gz"
        md5: "35887f73fe5e2231656504d1f6430900"
        path: "reference-genomes/hg38/hg19ToHg38.over.chain.gz"
      - id: "REFERENCE_GENOME_HG19_FA"
        url: "reference-genomes/hg19/hg19.fa.gz"
        md5: "b6631a1b3c6e1a5db6ee94c21a460ae7"
        path: "reference-genomes/hg19/hg19.fa.gz"

      # Relatedness resources
      - id: "RELATEDNESS_PRUNE_IN_MARKERS"
        url: "relatedness/20250321_070521/relatedness_prune_in_markers.txt"
        md5: "e26bc59a60b5011d61ecc7a4e75ea75c"
        path: "relatedness/relatedness_prune_in_markers.txt"
      - id: "RELATEDNESS_FREQS"
        url: "relatedness/20250321_070521/relatedness_freqs.txt"
        md5: "0262b1a013484ddb01d3b96ab68f18d1"
        path: "relatedness/relatedness_freqs.txt"
      - id: "RELATEDNESS_THRESHOLDS"
        url: "relatedness/20250321_070521/relatedness_thresholds.tsv"
        md5: "97175d1574f14fe45bae13ffe277f295"
        path: "relatedness/relatedness_thresholds.tsv"

      # Inferred-sex resources
      - id: "INFERRED_SEX_CHRX_PRUNE_IN_MARKERS"
        url: "inferred-sex/20250321_070521/inferred_sex_chrX_prune_in_markers.txt"
        md5: "28059c14f6f8f0dfaade839c96fe42a0"
        path: "inferred-sex/inferred_sex_chrX_prune_in_markers.txt"
      - id: "INFERRED_SEX_CHRX_FREQS"
        url: "inferred-sex/20250321_070521/inferred_sex_chrX_freqs.txt"
        md5: "e9092b63f4892195bcdaab11c5c08110"
        path: "inferred-sex/inferred_sex_chrX_freqs.txt"
      - id: "INFERRED_SEX_KARYOTYPIC_THRESHOLDS"
        url: "inferred-sex/20250321_070521/inferred_sex_karyotypic_thresholds.json"
        md5: "a9b3d35305a7b5f9f82a0d607bd0e9ee"
        path: "inferred-sex/inferred_sex_karyotypic_thresholds.json"
      - id: "INFERRED_SEX_REFERENCE_VALUES"
        url: "inferred-sex/20250321_070521/inferred_sex_reference_values.txt"
        md5: "c88938e2b9d18de4f7f6ccbd72f92750"
        path: "inferred-sex/inferred_sex_reference_values.txt"

  # Docker used by OpenCGA analysis and containing external tools such as samtools, bcftools, tabix, fastqc, plink1.9, bwa and r-base
  # You can indicate the version, e.g: opencb/opencga-ext-tools:2.12.0, otherwise the current OpenCGA version will be used
  opencgaExtTools: "opencb/opencga-ext-tools"
  tools:
    - id: "exomiser"
      version: "13.1.0"
      dockerId: "exomiser/exomiser-cli:13.1.0"
      resourceIds: ["EXOMISER_13_1_0_HG38", "EXOMISER_13_1_0_PHENOTYPE"]

    - id: "exomiser"
      version: "14.0.0"
      defaultVersion: true
      dockerId: "exomiser/exomiser-cli:14.0.0"
      resourceIds: ["EXOMISER_14_0_0_HG38", "EXOMISER_14_0_0_PHENOTYPE"]

    - id: "mutational-signature"
      resourceIds:
        - "REFERENCE_GENOME_GRCH38_FA"
        - "REFERENCE_GENOME_GRCH38_FAI"
        - "REFERENCE_GENOME_GRCH38_GZI"
        - "REFERENCE_GENOME_GRCH37_FA"
        - "REFERENCE_GENOME_GRCH37_FAI"
        - "REFERENCE_GENOME_GRCH37_GZI"

    - id: "relatedness"
      resourceIds: ["RELATEDNESS_PRUNE_IN_MARKERS", "RELATEDNESS_FREQS", "RELATEDNESS_THRESHOLDS"]

    - id: "inferred-sex"
      resourceIds: ["INFERRED_SEX_CHRX_PRUNE_IN_MARKERS", "INFERRED_SEX_CHRX_FREQS", "INFERRED_SEX_KARYOTYPIC_THRESHOLDS", "INFERRED_SEX_REFERENCE_VALUES"]

    - id: "liftover"
      resourceIds:
        - "REFERENCE_GENOME_GRCH38_FA"
        - "REFERENCE_GENOME_GRCH38_CHAIN"
        - "REFERENCE_GENOME_GRCH37_FA"
        - "REFERENCE_GENOME_HG38_FA"
        - "REFERENCE_GENOME_HG38_CHAIN"
        - "REFERENCE_GENOME_HG19_FA"

  execution:
    # Accepted values are "local", "SGE", "azure-batch", "k8s"
    # see org.opencb.opencga.master.monitor.executors.ExecutorFactory
    id: "local"
    maxConcurrentJobs:
      variant-index: 20
      variant-annotation-index: 5
      variant-secondary-index: 2
    options:
      jobs.reuse.enabled: true
      jobs.reuse.tools:
          - "variant-index"
          - "variant-stats-index"
          - "variant-annotation-index"
          - "variant-secondary-annotation-index"
      ## Local executor configuration
      local.maxConcurrentJobs: 2    # Max number of concurrent jobs to be executed locally in the master

monitor:
  daysToRemove: 30
  executionDaemonInterval: 4000 # number of milliseconds between checks
  fileDaemonInterval: 8000      # number of milliseconds between checks
  port: 9092

quota:                             # Quotas per organisation
  maxNumUsers: 0                  # Maximum number of users that an organisation can have
  maxNumProjects: 0                # Maximum number of projects that an organisation can have
  maxNumVariantIndexSamples: 15000 # Maximum number of variant index samples that an organisation can have
  maxNumJobHours: 100              # Maximum number of hours that the organisation can use in jobs on a monthly basis

email:
  host: "localhost"
  port: ""
  user: ""
  password: ""
  from: ""
  ssl: false

hooks:
  test@1000G:phase1:   # Full Qualified Name of the study.
    file:               # Entity where the hook will be checked
     - field: "name"     # Field of the entity to be checked
       value: "~(.*)vcf.gz$"    # Value to be checked
       stage: "CREATE"   # Stage when the hook will be checked
       action: "ADD"     # Action to be performed
       where: "tags"     # Field over which the action will be performed
       what: "VCF,FILE"        # Value to be updated

panel:
  host: "http://resources.opencb.org/opencb/opencga/disease-panels"

catalog:
  database:
    hosts:
    - "localhost:27017"
    user: ""
    password: ""
    options:
      authenticationDatabase: ""

server:
  rest:
    port: 8080
    logFile: null
    defaultLimit: 2000
    maxLimit: 5000

  grpc:
    port: 8081
    logFile: null